plugins {
	id "org.springframework.boot" version "2.1.5.RELEASE"
	id "application"
}

application {
	mainClassName = "com.connexta.ingest.IngestApplication"
}

task unpack(type: Copy) {
	dependsOn bootJar
	from(zipTree(tasks.bootJar.outputs.files.singleFile))
	into("build/dependency")
}
docker {
	name "${bootJar.baseName}-service-image"
	copySpec.from(tasks.unpack.outputs).into("dependency")
	buildArgs(['DEPENDENCY': "dependency"])
}

run.dependsOn(build)
